%div
  #seatpicker-management.well
    %h4 Seat Management
    
    - if current_user.seat
      %p.seat-message
        You are currently sat in seat
        = current_user.seat.decorate.name
      = link_to 'Give up my seat', give_up_seat_path(current_user.seat), class: 'btn btn-default', method: :post, remote: true, data: { confirm: "Are you sure you wish to give up seat #{current_user.seat.decorate.name}?" }
    - elsif !current_user.seat
      %p You currently have no seat.
      
    - if current_user.seat_requests.any?
      #my-seat-requests.buffer-top
        %p You have requested the following #{'seat'.pluralize(current_user.seat_requests.count)}:
        
        - current_user.seat_requests.each do |seat_request|
          .row.buffer-top-sm
            .col-xs-2
              = seat_request.decorate.seat_name
            .col-xs-10
              = link_to 'Cancel request', seat_request_path(seat_request), method: :delete, remote: true, class: 'btn btn-default btn-xs pull-right', data: { confirm: "Are you sure you wish to cancel your request for seat '#{seat_request.decorate.seat_name}'"}
              
    - if current_user.seat && current_user.seat.seat_requests.any?
      #seat-requests.buffer-top
        %p Your seat has been requested by these users.
        - current_user.seat.seat_requests.each do |seat_request|
          .row.buffer-top-sm
            .col-xs-6
              = seat_request.decorate.user_username
            .col-xs-3
              = link_to 'Accept', accept_seat_request_path(seat_request), method: :post, remote: true, class: 'btn btn-default btn-xs pull-right', data: { confirm: "Are you sure you wish to accept the seat request from '#{seat_request.decorate.user_username}'?"}
            .col-xs-3
              = link_to 'Deny', deny_seat_request_path(seat_request), method: :post, remote: true, class: 'btn btn-default btn-xs pull-right', data: { confirm: "Are you sure you wish to deny the seat request from '#{seat_request.decorate.user_username}'?"}
              